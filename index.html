<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üìÖ Planificador Inteligente de Pr√°cticas | Academia Pro</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@600;700&display=swap">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    :root {
      --primary-color: #6366f1;
      --secondary-color: #8b5cf6;
      --success-color: #10b981;
      --warning-color: #f59e0b;
      --danger-color: #ef4444;
      --dark-color: #1e293b;
      --light-color: #f8fafc;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      color: #334155;
      line-height: 1.6;
      background: linear-gradient(to bottom right, #f0f4ff, #fbf9ff);
      min-height: 100vh;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1.5rem;
    }

    /* Navigation styles */
    nav {
      background: white;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
    }

    nav .container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 0;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .logo-icon {
      background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
      width: 40px;
      height: 40px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.25rem;
    }

    .logo-text {
      font-family: 'Poppins', sans-serif;
      font-weight: 700;
      font-size: 1.25rem;
      background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    /* Main Content */
    main {
      padding-top: 5rem;
      padding-bottom: 3rem;
    }

    .grid {
      display: grid;
      gap: 2rem;
    }

    @media (min-width: 768px) {
      .grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    /* Card styles */
    .card {
      background: white;
      border-radius: 20px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
      padding: 1.75rem;
      transition: all 0.3s ease;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.12);
    }

    .card-header {
      display: flex;
      align-items: center;
      margin-bottom: 1.5rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid #edf2f7;
    }

    .card-icon {
      width: 56px;
      height: 56px;
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 1rem;
      font-size: 1.5rem;
    }

    .card-icon-primary {
      background: rgba(99, 102, 241, 0.12);
      color: var(--primary-color);
    }

    .card-icon-secondary {
      background: rgba(139, 92, 246, 0.12);
      color: var(--secondary-color);
    }

    .card-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: #1e293b;
      margin: 0;
    }

    /* Input styles */
    .input-group {
      margin-bottom: 1.5rem;
    }

    .input-label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: #4b5563;
      font-size: 0.95rem;
    }

    .input-container {
      position: relative;
      border-radius: 14px;
      overflow: hidden;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.05);
    }

    .input-icon {
      position: absolute;
      left: 16px;
      top: 50%;
      transform: translateY(-50%);
      color: #94a3b8;
      font-size: 1.1rem;
      z-index: 2;
    }

    .input-field {
      width: 100%;
      padding: 15px 16px 15px 50px;
      border: none;
      background: #f8fafc;
      font-family: 'Inter', sans-serif;
      font-size: 1rem;
      color: #1e293b;
      transition: all 0.3s ease;
      border-radius: 14px;
    }

    .input-field:focus {
      outline: none;
      background: white;
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
    }

    /* Button styles */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      border-radius: 14px;
      padding: 1rem 1.5rem;
      cursor: pointer;
      transition: all 0.3s ease;
      border: none;
      font-size: 1rem;
      width: 100%;
      margin-top: 0.5rem;
    }

    .btn-primary {
      background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
      color: white;
      box-shadow: 0 4px 15px rgba(99, 102, 241, 0.4);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(99, 102, 241, 0.5);
    }

    .btn-secondary {
      background: white;
      color: var(--primary-color);
      border: 2px solid var(--primary-color);
      box-shadow: 0 3px 8px rgba(99, 102, 241, 0.1);
    }

    .btn-secondary:hover {
      background: var(--primary-color);
      color: white;
      transform: translateY(-2px);
    }

    /* Result container */
    .result-container {
      margin-top: 1.75rem;
      padding: 1.5rem;
      border-radius: 16px;
      display: none;
      animation: fadeIn 0.4s ease;
      position: relative;
      overflow: hidden;
    }

    .result-container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 6px;
      height: 100%;
    }

    .result-container.success {
      background: rgba(16, 185, 129, 0.1);
      border: 1px solid rgba(16, 185, 129, 0.3);
      color: #065f46;
    }

    .result-container.success::before {
      background: linear-gradient(to bottom, #10b981, #059669);
    }

    .result-container.error {
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.3);
      color: #991b1b;
    }

    .result-container.error::before {
      background: linear-gradient(to bottom, #ef4444, #dc2626);
    }

    .result-container.warning {
      background: rgba(245, 158, 11, 0.1);
      border: 1px solid rgba(245, 158, 11, 0.3);
      color: #854d0e;
    }

    .result-container.warning::before {
      background: linear-gradient(to bottom, #f59e0b, #d97706);
    }

    .days-counter {
      background: rgba(99, 102, 241, 0.1);
      border: 1px solid rgba(99, 102, 241, 0.3);
      color: #4f46e5;
      padding: 1.25rem;
      border-radius: 16px;
      margin-top: 1.25rem;
      font-weight: 700;
      text-align: center;
      display: none;
    }

    /* Progress bar */
    .progress-container {
      margin-top: 1.5rem;
    }

    .progress-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
      font-size: 0.9rem;
      font-weight: 600;
    }

    .progress-bar-bg {
      height: 12px;
      background: #e0e7ff;
      border-radius: 6px;
      overflow: hidden;
    }

    .progress-bar-fill {
      height: 100%;
      background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
      border-radius: 6px;
      transition: width 0.5s ease;
    }

    /* Calendar styles */
    .calendar-controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
      padding: 0.75rem 0;
    }

    .calendar-nav {
      display: flex;
      gap: 0.5rem;
    }

    .calendar-btn {
      width: 40px;
      height: 40px;
      border-radius: 12px;
      background: white;
      border: 1px solid #e2e8f0;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s ease;
      color: #64748b;
    }

    .calendar-btn:hover {
      background: var(--primary-color);
      color: white;
      border-color: var(--primary-color);
    }

    .calendar-month {
      font-weight: 700;
      font-size: 1.25rem;
      color: #1e293b;
    }

    .calendar-today {
      background: rgba(99, 102, 241, 0.1);
      color: var(--primary-color);
      font-weight: 600;
      padding: 0.375rem 0.75rem;
      border-radius: 10px;
      border: 1px solid rgba(99, 102, 241, 0.2);
    }

    .calendar-today:hover {
      background: rgba(99, 102, 241, 0.15);
    }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 4px;
      background: #f8fafc;
      padding: 1rem;
      border-radius: 16px;
    }

    .calendar-header {
      text-align: center;
      font-weight: 700;
      color: #64748b;
      padding: 0.5rem 0;
      font-size: 0.9rem;
    }

    .calendar-day {
      aspect-ratio: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 12px;
      font-weight: 600;
      font-size: 0.95rem;
      position: relative;
      cursor: pointer;
      transition: all 0.2s ease;
      border: 2px solid transparent;
    }

    .calendar-day:hover:not(.calendar-disabled) {
      transform: scale(1.08);
      z-index: 10;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .calendar-day-number {
      position: relative;
      z-index: 2;
    }

    .calendar-day::before {
      content: '';
      position: absolute;
      width: 90%;
      height: 90%;
      border-radius: 10px;
      z-index: 1;
      transition: all 0.2s ease;
    }

    .calendar-lective::before {
      background-color: rgba(16, 185, 129, 0.15);
    }

    .calendar-non-lective::before {
      background-color: rgba(239, 68, 68, 0.15);
    }

    .calendar-weekend::before {
      background-color: rgba(219, 234, 254, 0.8);
    }

    .calendar-today-day {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.3);
    }

    .calendar-selected {
      transform: scale(1.1);
      border-color: var(--primary-color);
      box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.4);
    }

    .calendar-selected::before {
      background-color: rgba(99, 102, 241, 0.25);
    }

    .calendar-disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    /* Stats cards */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
      gap: 1rem;
      margin-top: 2rem;
    }

    .stat-card {
      display: flex;
      align-items: center;
      padding: 1rem;
      border-radius: 16px;
      transition: all 0.3s ease;
    }

    .stat-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
    }

    .stat-icon {
      width: 48px;
      height: 48px;
      border-radius: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 0.75rem;
      font-size: 1.25rem;
      flex-shrink: 0;
    }

    .stat-icon-lective {
      background: rgba(99, 102, 241, 0.15);
      color: var(--primary-color);
    }

    .stat-icon-nonlective {
      background: rgba(239, 68, 68, 0.15);
      color: var(--danger-color);
    }

    .stat-icon-hours {
      background: rgba(245, 158, 11, 0.15);
      color: var(--warning-color);
    }

    .stat-icon-deadline {
      background: rgba(16, 185, 129, 0.15);
      color: var(--success-color);
    }

    .stat-label {
      font-size: 0.85rem;
      color: #4b5563;
      margin-bottom: 0.25rem;
    }

    .stat-value {
      font-size: 1.5rem;
      font-weight: 800;
      color: #1e293b;
    }

    /* Info section */
    .info-section {
      margin-top: 2.5rem;
    }

    .info-title {
      display: flex;
      align-items: center;
      font-size: 1.35rem;
      font-weight: 700;
      color: #1e293b;
      margin-bottom: 1.5rem;
    }

    .info-icon {
      color: var(--primary-color);
      margin-right: 0.75rem;
      font-size: 1.5rem;
    }

    .info-grid {
      display: grid;
      gap: 1.5rem;
    }

    @media (min-width: 768px) {
      .info-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    .info-card {
      background: white;
      border-radius: 16px;
      padding: 1.5rem;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
      border-left: 4px solid var(--primary-color);
      transition: all 0.3s ease;
    }

    .info-card:hover {
      transform: translateX(5px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
    }

    .info-card:nth-child(2) {
      border-left-color: var(--secondary-color);
    }

    .info-card:nth-child(3) {
      border-left-color: var(--success-color);
    }

    .info-card-title {
      display: flex;
      align-items: center;
      font-weight: 700;
      font-size: 1.15rem;
      margin-bottom: 0.75rem;
      color: #1e293b;
    }

    .info-card-icon {
      margin-right: 0.75rem;
      font-size: 1.25rem;
    }

    .info-card:nth-child(1) .info-card-icon {
      color: var(--primary-color);
    }

    .info-card:nth-child(2) .info-card-icon {
      color: var(--secondary-color);
    }

    .info-card:nth-child(3) .info-card-icon {
      color: var(--success-color);
    }

    .info-card-text {
      color: #4b5563;
      line-height: 1.6;
    }

    .info-card-text strong {
      color: #1e293b;
    }

    /* Footer */
    footer {
      background: white;
      padding: 2rem 0;
      margin-top: 2rem;
      border-top: 1px solid #e2e8f0;
    }

    .footer-content {
      text-align: center;
      color: #64748b;
    }

    .footer-year {
      font-weight: 600;
      color: #334155;
    }

    .social-links {
      display: flex;
      justify-content: center;
      gap: 1.5rem;
      margin-top: 1rem;
    }

    .social-link {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: #f1f5f9;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #64748b;
      font-size: 1.1rem;
      transition: all 0.3s ease;
    }

    .social-link:hover {
      background: var(--primary-color);
      color: white;
      transform: translateY(-3px);
    }

    /* Animations */
    @keyframes fadeIn {
      from { 
        opacity: 0; 
        transform: translateY(10px); 
      }
      to { 
        opacity: 1; 
        transform: translateY(0); 
      }
    }

    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.4); }
      70% { box-shadow: 0 0 0 12px rgba(99, 102, 241, 0); }
      100% { box-shadow: 0 0 0 0 rgba(99, 102, 241, 0); }
    }

    .pulse-animation {
      animation: pulse 1.5s infinite;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .container {
        padding: 0 1rem;
      }
      
      .card {
        padding: 1.5rem;
      }
      
      .input-field {
        padding: 14px 16px 14px 46px;
      }
      
      .stat-value {
        font-size: 1.25rem;
      }
      
      .calendar-day {
        font-size: 0.85rem;
      }
      
      .info-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <!-- Navigation Bar -->
  <nav>
    <div class="container">
      <div class="logo">
        <div class="logo-icon">
          <i class="fas fa-graduation-cap"></i>
        </div>
        <div class="logo-text">Planificador de Pr√°cticas</div>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="container">
    <div class="grid">
      <!-- Calculator Card -->
      <div class="card">
        <div class="card-header">
          <div class="card-icon card-icon-primary">
            <i class="fas fa-calculator"></i>
          </div>
          <h2 class="card-title">Calcula tu fecha de finalizaci√≥n</h2>
        </div>
        
        <div class="input-group">
          <label for="startDate" class="input-label">Fecha de inicio:</label>
          <div class="input-container">
            <i class="fas fa-calendar-alt input-icon"></i>
            <input type="date" id="startDate" value="2026-03-02" class="input-field">
          </div>
        </div>
        
        <div class="input-group">
          <label for="totalHours" class="input-label">Horas totales de pr√°cticas:</label>
          <div class="input-container">
            <i class="fas fa-clock input-icon"></i>
            <input type="number" id="totalHours" min="1" value="120" class="input-field">
          </div>
        </div>
        
        <div class="input-group">
          <label for="dailyHours" class="input-label">Horas diarias de pr√°cticas:</label>
          <div class="input-container">
            <i class="fas fa-hourglass-half input-icon"></i>
            <input type="number" id="dailyHours" min="1" value="6" class="input-field">
          </div>
        </div>
        
        <button onclick="calculateEndDate()" class="btn btn-primary">
          <i class="fas fa-play-circle mr-2"></i> Calcular fecha de finalizaci√≥n
        </button>
        
        <button onclick="downloadPDF()" class="btn btn-secondary">
          <i class="fas fa-file-pdf mr-2"></i> Descargar informe en PDF
        </button>
        
        <div id="result" class="result-container"></div>
        <div id="daysCount" class="days-counter"></div>
        
        <div class="progress-container" id="progressContainer" style="display: none;">
          <div class="progress-header">
            <span>Progreso de pr√°cticas</span>
            <span id="progressText">0%</span>
          </div>
          <div class="progress-bar-bg">
            <div class="progress-bar-fill" id="progressBar" style="width: 0%"></div>
          </div>
        </div>
      </div>
      
      <!-- Calendar & Stats Card -->
      <div class="card">
        <div class="card-header">
          <div class="card-icon card-icon-secondary">
            <i class="fas fa-calendar-check"></i>
          </div>
          <h2 class="card-title">Calendario interactivo</h2>
        </div>
        
        <div class="calendar-controls">
          <div class="calendar-nav">
            <button id="prevMonth" class="calendar-btn">
              <i class="fas fa-chevron-left"></i>
            </button>
            <button id="nextMonth" class="calendar-btn">
              <i class="fas fa-chevron-right"></i>
            </button>
          </div>
          <div class="calendar-month" id="currentMonth">Marzo 2026</div>
          <button id="todayBtn" class="calendar-today">
            <i class="fas fa-calendar-day mr-1"></i> Hoy
          </button>
        </div>
        
        <div class="calendar-grid" id="calendarGrid">
          <!-- Calendar will be populated by JavaScript -->
        </div>
        
        <!-- Weekday headers will be added by JavaScript -->
        
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon stat-icon-lective">
              <i class="fas fa-business-time"></i>
            </div>
            <div>
              <p class="stat-label">D√≠as lectivos</p>
              <p id="lectiveDaysStat" class="stat-value">0</p>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon stat-icon-nonlective">
              <i class="fas fa-ban"></i>
            </div>
            <div>
              <p class="stat-label">D√≠as no lectivos</p>
              <p id="nonLectiveDaysStat" class="stat-value">10</p>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon stat-icon-hours">
              <i class="fas fa-hourglass-half"></i>
            </div>
            <div>
              <p class="stat-label">Horas restantes</p>
              <p id="remainingHoursStat" class="stat-value">0</p>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon stat-icon-deadline">
              <i class="fas fa-flag-checkered"></i>
            </div>
            <div>
              <p class="stat-label">Fecha l√≠mite</p>
              <p class="stat-value">19 Jun</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Additional Info Section -->
    <div class="info-section">
      <h3 class="info-title">
        <i class="fas fa-info-circle info-icon"></i>
        Informaci√≥n importante
      </h3>
      <div class="info-grid">
        <div class="info-card">
          <h4 class="info-card-title">
            <i class="fas fa-bell info-card-icon"></i>
            D√≠as festivos
          </h4>
          <p class="info-card-text">Los c√°lculos consideran los d√≠as no lectivos del calendario escolar 2025-2026, incluyendo festivos locales y auton√≥micos.</p>
        </div>
        
        <div class="info-card">
          <h4 class="info-card-title">
            <i class="fas fa-exclamation-triangle info-card-icon"></i>
            Fecha l√≠mite
          </h4>
          <p class="info-card-text">Todas las pr√°cticas deben finalizar antes del <strong>19 de junio de 2026</strong>. Se calcular√°n las horas diarias m√≠nimas necesarias si se sobrepasa esta fecha.</p>
        </div>
        
        <div class="info-card">
          <h4 class="info-card-title">
            <i class="fas fa-download info-card-icon"></i>
            Informes personalizados
          </h4>
          <p class="info-card-text">Genera y descarga un informe detallado en PDF con todos los datos de tu planificaci√≥n de pr√°cticas.</p>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="footer-content">
        <p>¬© <span class="footer-year">2025</span> Planificador de Pr√°cticas Acad√©micas | Una herramienta para estudiantes</p>
        <div class="social-links">
          <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
          <a href="#" class="social-link"><i class="fab fa-linkedin-in"></i></a>
          <a href="#" class="social-link"><i class="fab fa-github"></i></a>
          <a href="#" class="social-link"><i class="fas fa-envelope"></i></a>
        </div>
      </div>
    </div>
  </footer>

  <script>
    // Configuraci√≥n inicial
    const nonLectiveDates = new Set([
      '2026-03-27',
      '2026-03-30',
      '2026-03-31',
      '2026-04-01',
      '2026-04-02', // Jueves Santo
      '2026-04-03', // Viernes Santo
      '2026-04-06',
      '2026-05-01',
      '2026-05-02',
      '2026-05-15'  // Festivo local de Madrid
    ]);

    const fixedEndDate = new Date('2026-06-19'); // Fecha fija de finalizaci√≥n
    let lastCalculation = null;
    
    // Variables para el calendario interactivo
    let currentDate = new Date(2026, 2, 1); // Marzo 2026 por defecto
    let highlightedDate = null;
    
    // Formatear fecha a formato ISO
    function formatISO(d) {
      return `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, '0')}-${String(d.getDate()).padStart(2, '0')}`;
    }

    // Verificar si es fin de semana
    function isWeekend(date) {
      return date.getDay() === 0 || date.getDay() === 6; // Domingo = 0, S√°bado = 6
    }

    // Verificar si es d√≠a lectivo
    function isLective(date) {
      const iso = formatISO(date);
      return !isWeekend(date) && !nonLectiveDates.has(iso);
    }
    
    // Funciones del calendario interactivo
    function initCalendar() {
      document.getElementById('prevMonth').addEventListener('click', prevMonth);
      document.getElementById('nextMonth').addEventListener('click', nextMonth);
      document.getElementById('todayBtn').addEventListener('click', goToToday);
      renderCalendar();
    }

    function updateCalendar(dateISO) {
      highlightedDate = dateISO;
      renderCalendar();
    }

    function renderCalendar() {
      const calendarGrid = document.getElementById('calendarGrid');
      const currentMonthElement = document.getElementById('currentMonth');
      calendarGrid.innerHTML = '';
      
      // A√±adir encabezados de d√≠as de la semana
      const weekdays = ['L', 'M', 'X', 'J', 'V', 'S', 'D'];
      weekdays.forEach(day => {
        const dayElement = document.createElement('div');
        dayElement.className = 'calendar-header';
        dayElement.textContent = day;
        calendarGrid.appendChild(dayElement);
      });
      
      // Actualizar t√≠tulo del mes
      const monthNames = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];
      const monthName = monthNames[currentDate.getMonth()];
      const year = currentDate.getFullYear();
      currentMonthElement.textContent = `${monthName} ${year}`;
      
      // Obtener primer d√≠a del mes
      const firstDay = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);
      const startDay = (firstDay.getDay() === 0 ? 6 : firstDay.getDay() - 1); // Lunes = 0, Domingo = 6
      
      // Obtener √∫ltimo d√≠a del mes
      const lastDay = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0);
      const totalDays = lastDay.getDate();
      
      // A√±adir d√≠as en blanco antes del primer d√≠a del mes
      for (let i = 0; i < startDay; i++) {
        const emptyDay = document.createElement('div');
        emptyDay.className = 'calendar-day calendar-disabled';
        calendarGrid.appendChild(emptyDay);
      }
      
      // Obtener fecha actual para resaltar "hoy"
      const today = new Date();
      const todayISO = formatISO(today);
      
      // A√±adir d√≠as del mes
      for (let day = 1; day <= totalDays; day++) {
        const dayDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), day);
        const dayISO = formatISO(dayDate);
        const dayElement = document.createElement('div');
        dayElement.className = 'calendar-day';
        dayElement.innerHTML = `<span class="calendar-day-number">${day}</span>`;
        
        // Clases condicionales
        if (isWeekend(dayDate)) {
          dayElement.classList.add('calendar-weekend');
        } else if (nonLectiveDates.has(dayISO)) {
          dayElement.classList.add('calendar-non-lective');
        } else {
          dayElement.classList.add('calendar-lective');
        }
        
        // Marcar "hoy"
        if (todayISO === dayISO && today.getFullYear() === dayDate.getFullYear() && today.getMonth() === dayDate.getMonth()) {
          dayElement.classList.add('calendar-today-day');
        }
        
        // Marcar fecha final calculada
        if (highlightedDate === dayISO) {
          dayElement.classList.add('calendar-selected');
        }
        
        // A√±adir tooltip con informaci√≥n adicional
        let tooltipText = `${dayDate.toLocaleDateString('es-ES', { weekday: 'long' })}, ${day} de ${monthName.toLowerCase()}`;
        if (nonLectiveDates.has(dayISO)) {
          tooltipText += ' (No lectivo)';
        } else if (isWeekend(dayDate)) {
          tooltipText += ' (Fin de semana)';
        } else {
          tooltipText += ' (D√≠a lectivo)';
        }
        
        dayElement.title = tooltipText;
        calendarGrid.appendChild(dayElement);
      }
    }

    // Navegaci√≥n del calendario
    function prevMonth() {
      currentDate.setMonth(currentDate.getMonth() - 1);
      renderCalendar();
    }

    function nextMonth() {
      currentDate.setMonth(currentDate.getMonth() + 1);
      renderCalendar();
    }

    function goToToday() {
      currentDate = new Date();
      renderCalendar();
    }
    
    // Calcular fecha de finalizaci√≥n
    function calculateEndDate() {
      const total = parseFloat(document.getElementById('totalHours').value);
      const daily = parseFloat(document.getElementById('dailyHours').value);
      const resultDiv = document.getElementById('result');
      const daysCounter = document.getElementById('daysCount');
      const progressContainer = document.getElementById('progressContainer');
      
      // Validaci√≥n de entradas
      if (isNaN(total) || isNaN(daily) || total <= 0 || daily <= 0) {
        showError('‚ùå Valores inv√°lidos. Aseg√∫rate de que sean n√∫meros mayores que 0.');
        lastCalculation = null;
        return;
      }
      
      let current = new Date(document.getElementById('startDate').value);
      let remaining = total;
      let lectiveDaysCount = 0;
      
      // Validar fecha de inicio
      if (current > fixedEndDate) {
        showError('‚ùå La fecha de inicio no puede ser posterior al 19 de junio de 2026.');
        lastCalculation = null;
        return;
      }
      
      // Calcular d√≠as lectivos disponibles entre startDate y fixedEndDate
      let tempDate = new Date(current);
      let availableLectiveDays = 0;
      while (tempDate <= fixedEndDate) {
        if (isLective(tempDate)) {
          availableLectiveDays++;
        }
        tempDate.setDate(tempDate.getDate() + 1);
      }
      
      // Calcular fecha de finalizaci√≥n
      while (remaining > 0 && current <= fixedEndDate) {
        if (isLective(current)) {
          remaining -= daily;
          lectiveDaysCount++;
        }
        if (remaining <= 0) break;
        current.setDate(current.getDate() + 1);
      }
      
      // Mostrar d√≠as de pr√°cticas
      daysCounter.textContent = `D√≠as lectivos necesarios: ${lectiveDaysCount}`;
      daysCounter.style.display = 'block';
      
      // Actualizar estad√≠sticas
      document.getElementById('lectiveDaysStat').textContent = lectiveDaysCount;
      document.getElementById('nonLectiveDaysStat').textContent = nonLectiveDates.size;
      document.getElementById('remainingHoursStat').textContent = Math.max(0, remaining.toFixed(1));
      
      // Mostrar barra de progreso
      progressContainer.style.display = 'block';
      
      // Calcular porcentaje de progreso
      const progressPercentage = Math.min(100, ((total - Math.max(0, remaining)) / total) * 100);
      document.getElementById('progressBar').style.width = `${progressPercentage}%`;
      document.getElementById('progressText').textContent = `${Math.round(progressPercentage)}%`;
      
      if (current > fixedEndDate && remaining > 0) {
        // C√°lculo de horas diarias m√≠nimas
        if (availableLectiveDays > 0) {
          const minHoursPerDay = (total / availableLectiveDays).toFixed(2);
          showWarning(
            `‚ö†Ô∏è No es posible completar ${total} horas con ${daily} h/d√≠a antes del 19 de junio de 2026.<br>` +
            `Para finalizar a tiempo, necesitas al menos <strong>${minHoursPerDay} horas diarias</strong> ` +
            `durante los ${availableLectiveDays} d√≠as lectivos disponibles.`
          );
        } else {
          showError('‚ö†Ô∏è No hay d√≠as lectivos disponibles entre la fecha de inicio y el 19 de junio de 2026.');
        }
        lastCalculation = null;
      } else {
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        showSuccess(`‚úÖ ¬°Perfecto! Finalizar√°s tus pr√°cticas el <strong>${current.toLocaleDateString('es-ES', options)}</strong>`);
        
        lastCalculation = {
          startDate: new Date(document.getElementById('startDate').value),
          endDate: fixedEndDate,
          totalHours: total,
          dailyHours: daily,
          finishDate: new Date(current),
          lectiveDays: lectiveDaysCount,
          remainingHours: Math.max(0, remaining)
        };
        
        // Actualizar calendario con la fecha de finalizaci√≥n
        updateCalendar(formatISO(current));
      }
      
      // Efecto visual especial para el bot√≥n
      const calcBtn = event.target;
      calcBtn.classList.add('pulse-animation');
      setTimeout(() => calcBtn.classList.remove('pulse-animation'), 1500);
    }

    // Mostrar mensajes de resultado
    function showSuccess(message) {
      const resultDiv = document.getElementById('result');
      resultDiv.innerHTML = message;
      resultDiv.className = 'result-container success';
      resultDiv.style.display = 'block';
    }

    function showError(message) {
      const resultDiv = document.getElementById('result');
      resultDiv.innerHTML = message;
      resultDiv.className = 'result-container error';
      resultDiv.style.display = 'block';
    }

    function showWarning(message) {
      const resultDiv = document.getElementById('result');
      resultDiv.innerHTML = message;
      resultDiv.className = 'result-container warning';
      resultDiv.style.display = 'block';
    }

    // Descargar PDF
    function downloadPDF() {
      if (!lastCalculation) {
        showWarning('‚ö†Ô∏è Primero debes realizar un c√°lculo v√°lido antes de generar el PDF.');
        return;
      }
      
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      
      // Agregar logo/encabezado
      doc.setFont('helvetica', 'bold');
      doc.setFontSize(22);
      doc.setTextColor(99, 102, 241);
      doc.text('Planificador de Pr√°cticas Acad√©micas', 105, 25, { align: 'center' });
      
      doc.setFontSize(10);
      doc.setTextColor(100, 116, 139);
      doc.text('Un informe detallado de tu planificaci√≥n', 105, 32, { align: 'center' });
      
      // L√≠nea decorativa
      doc.setDrawColor(99, 102, 241);
      doc.setLineWidth(1.5);
      doc.line(20, 38, 190, 38);
      
      // Datos principales
      doc.setFontSize(14);
      doc.setTextColor(30, 41, 59);
      doc.setFont('helvetica', 'bold');
      doc.text('Resumen de la planificaci√≥n', 20, 48);
      
      doc.setFontSize(11);
      doc.setFont('helvetica', 'normal');
      let y = 58;
      const lineHeight = 8;
      
      doc.text(`‚Ä¢ Fecha de inicio: ${lastCalculation.startDate.toLocaleDateString('es-ES')}`, 25, y);
      y += lineHeight;
      
      doc.text(`‚Ä¢ Fecha l√≠mite establecida: ${fixedEndDate.toLocaleDateString('es-ES')}`, 25, y);
      y += lineHeight;
      
      doc.text(`‚Ä¢ Horas totales requeridas: ${lastCalculation.totalHours} horas`, 25, y);
      y += lineHeight;
      
      doc.text(`‚Ä¢ Horas diarias planificadas: ${lastCalculation.dailyHours} horas/d√≠a`, 25, y);
      y += lineHeight;
      
      doc.text(`‚Ä¢ D√≠as lectivos necesarios: ${lastCalculation.lectiveDays} d√≠as`, 25, y);
      y += lineHeight;
      
      doc.text(`‚Ä¢ Fecha estimada de finalizaci√≥n: ${lastCalculation.finishDate.toLocaleDateString('es-ES')}`, 25, y);
      y += lineHeight;
      
      doc.text(`‚Ä¢ Horas restantes: ${lastCalculation.remainingHours.toFixed(1)} horas`, 25, y);
      y += lineHeight * 2;
      
      // Secci√≥n de d√≠as no lectivos
      doc.setFont('helvetica', 'bold');
      doc.text('D√≠as no lectivos considerados', 20, y);
      doc.setFont('helvetica', 'normal');
      y += lineHeight;
      
      const nonLectiveArray = Array.from(nonLectiveDates).sort();
      let daysPerLine = 3;
      for (let i = 0; i < nonLectiveArray.length; i++) {
        const date = nonLectiveArray[i];
        const dateObj = new Date(date);
        const formattedDate = dateObj.toLocaleDateString('es-ES');
        const xPos = 25 + ((i % daysPerLine) * 60);
        if (i % daysPerLine === 0 && i > 0) y += lineHeight;
        doc.text(`‚Ä¢ ${formattedDate}`, xPos, y);
      }
      
      // Pie de p√°gina
      y = 270;
      doc.setDrawColor(226, 232, 240);
      doc.line(20, y-5, 190, y-5);
      doc.setFontSize(9);
      doc.setTextColor(100, 116, 139);
      doc.text('Documento generado autom√°ticamente mediante Planificador de Pr√°cticas Acad√©micas', 105, y, { align: 'center' });
      doc.text(`Fecha de generaci√≥n: ${new Date().toLocaleDateString('es-ES')} ${new Date().toLocaleTimeString('es-ES')}`, 105, y+5, { align: 'center' });
      
      // Guardar PDF
      doc.save(`planificacion_practicas_${formatISO(new Date())}.pdf`);
      
      // Efecto visual
      showSuccess('‚úÖ ¬°Informe PDF generado correctamente!');
      setTimeout(() => {
        document.getElementById('result').style.display = 'none';
      }, 3000);
    }

    // Inicializaci√≥n cuando el DOM est√© listo
    document.addEventListener('DOMContentLoaded', function() {
      // Inicializar calendario
      initCalendar();
      
      // Cargar la fecha actual en el campo de inicio si es necesario
      const today = new Date();
      const startDateInput = document.getElementById('startDate');
      
      // Si la fecha actual es anterior a marzo de 2026, establecer fecha por defecto
      if (today < new Date('2026-03-01')) {
        startDateInput.value = '2026-03-02';
      } else {
        // Formatear fecha actual para input type="date"
        startDateInput.value = today.toISOString().split('T')[0];
      }
      
      // Realizar un c√°lculo inicial para mostrar estad√≠sticas
      calculateEndDate();
    });
  </script>
</body>

</html>
